

<%= stylesheet_link_tag "chapters", :media => "all" %>

<div class="container-fluid">
  <div class="row show-view">

    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
      <div class="position-sticky pt-3">
        <ul class="nav flex-column">

          <% @chapter.course.chapters.each do |chapter| %>
            <% if @chapter.id == chapter.id %>
                <li class="nav-item">
                    <span class="nav-link current-page"> <%= chapter.title %></span>
                </li>
            <% else %>
                <li class="nav-item">
                    <%= link_to chapter.title, course_chapter_path(chapter.course, chapter), class: "nav-link" %>
                </li>
            <% end %>
          <% end %>
        </ul>
      </div>
    </nav>

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">

        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <%= link_to @chapter.course.title, course_path(@chapter.course) %>
                </li>

                <li class="breadcrumb-item active" aria-current="page">
                    <%= @chapter.title %>
                </li>
            </ol>
        </nav>

        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2"><%= @chapter.title %></h1>
        </div>

        <div class="section-content">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Section</th>
                        <th scope="col">Link</th>
                    </tr>
                </thead>
                <tbody>
                    <% @chapter.sections.each.with_index(1) do |section, i| %>
                        <% next unless section.id %>
                         <tr>
                            <th scope="row"><%= i %></th>
                            <td>
                                <%= link_to section.title, chapter_section_path(@chapter, section) %>
                            </td>
                            <td>
                                <div class="btn-toolbar mb-2 mb-md-0">
                                    <div class="btn-group me-2">
                                        <%= link_to '編集', edit_chapter_section_path(section.chapter, section), class: "btn btn-sm btn-outline-secondary" %>
                                        <%= link_to "削除", chapter_section_path(section.chapter, section), method: :delete, "data-confirm" => "本当に削除しますか？", class: "btn btn-sm btn-outline-secondary" %>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    <% end %>
                </tbody>
            </table>
            <%= link_to 'new section', new_chapter_section_path(@chapter) %>
        </div>
                
    </main>
  </div>
</div>





