<%= stylesheet_link_tag "articles", :media => "all" %>
<!-- sidenavで共通使用 -->
<%= stylesheet_link_tag "chapters", :media => "all" %>

<div class="row index-view side-nav">
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion sb-sidenav-light bg-light" id="sidenavAccordion">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <div class="sb-sidenav-menu-heading text-dark">
                            <%= link_to "カテゴリー", articles_path, class: "nav-link" %>
                        </div>

                        <% @categories.each do |category_name, articles_num| %>
                        <div class="chapter-nav">
                            <%= link_to "・#{category_name}(#{articles_num})", request.fullpath+"&category=#{category_name}", class: "nav-link" %>
                        </div>
                        <% end %>
                    </div>
                </div>
            </nav>
        </div>

        <div id="layoutSidenav_content">
            <main>
                <div class="container-fluid px-4">
                    <h3>お気に入り記事一覧</h3>
                    <hr>
                    <table class="table">
                        <% @favorite_articles.each do |article| %>
                        <tr>
                            <td>
                                <div class="flex-md-row h-md-250">
                                    <div class="card-body d-flex flex-column align-items-start">
                                        <h4 class="mb-0">
                                            <%= link_to article.title, article_path(article), class: "text-dark" %>
                                        </h4>
                                        <div class="mb-1 text-muted"><%= article.category.name %></div>
                                        <!-- <p class="card-text mb-auto"><%#= article.content.truncate(100) %></p> -->
                                        <p class="card-good mb-auto"><i class="far fa-thumbs-up"></i>
                                            <%= article.favorites.length %></p>
                                        <div class="mb-1 text-muted card-username">
                                            <%= article.updated_at.strftime('%Y/%m/%d') %> - <%= article.user.name %>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <% end %>
                    </table>
                </div>
            </main>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous">
</script>